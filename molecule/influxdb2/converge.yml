---
- name: Converge
  hosts: all

  vars:
    influxdb_influxdb2_admin_token: 123456789abc!
    influxdb_influxdb2_orgs:
      - name: org1
        desc: this is org-1
        state: present
        token: "{{ influxdb_influxdb2_admin_token }}"
        host: http://localhost:8086

#    influxdb_influxdb2_buckets:
#      - name: foobar1
#        state: present
#        org: default
#        token: "{{ influxdb_influxdb2_admin_token }}"
#        host: "{{ influxdb_influxdb2_host }}"
#        retention:
#          type: expire
#          everySeconds: 50000
#          shardGroupDurationSeconds: 0

  collections:
    - tbauriedel.influxdb2

  roles:
    - repos
    - influxdb2
